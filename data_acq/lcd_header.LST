C51 COMPILER V9.50a   LCD_HEADER                                                           01/12/2023 09:58:40 PAGE 1   


C51 COMPILER V9.50a, COMPILATION OF MODULE LCD_HEADER
OBJECT MODULE PLACED IN lcd_header.OBJ
COMPILER INVOKED BY: C:\Keil\C51\BIN\C51.EXE lcd_header.c BROWSE DEBUG OBJECTEXTEND TABS(2)

line level    source

   1          #include<reg51.h>
   2          #include"delay_1ms.c"
   3          #define LCD P2
   4          sbit RS = P1^0;
   5          sbit RW = P1^1;
   6          sbit E  = P1^2;
   7          code cgram_lut[]={0x07,0x05,0x05,0x07,0x00,0x00,0x00,0x00};
   8          void LCD_INIT(void);
   9          void LCD_CMD(unsigned char);
  10          void LCD_DATA(unsigned char);
  11          void LCD_STR(unsigned char*);
  12          void LCD_INT(int n);
  13          void LCD_FLOAT(float);
  14          
  15          
  16          void LCD_INIT(void)
  17          {
  18   1        LCD_CMD(0x01);//CLEAR THE DISPLAY
  19   1        LCD_CMD(0x02);//RETURN TO HOME POSITION
  20   1        LCD_CMD(0x0c);//DISPLAY ON CURSOR OFF
  21   1        LCD_CMD(0x38);//8BIT INTERFACE MODE
  22   1        LCD_CMD(0x80);//SELECT DDRAM ADDRESS
  23   1      }
  24          void LCD_CMD(unsigned char c)
  25          {
  26   1        LCD = c;//ASSIGNING COMMAND BYTES TO DATA PINS
  27   1        RS  = 0;//SELECTING COMMAND REGISTER
  28   1        RW  = 0;//WRITE TO LCD
  29   1        E   = 1;//LATCH THE DATA TO LCD
  30   1        delay_1ms(2);//INTERNAL OPERATIONS MODE
  31   1        E   = 0;//RE-LATCH THE DATA
  32   1      }
  33          void LCD_DATA(unsigned char d)
  34          {
  35   1        LCD = d;//ASSIGNING DATA BYTES TO DATA PINS
  36   1        RS  = 1;//SELECTING DATA REGISTER
  37   1        RW  = 0;//WRITE TO LCD
  38   1        E   = 1;//LATCH THE DATA TO LCD
  39   1        delay_1ms(2);//INTERNAL OPERATIONS MODE
  40   1        E   = 0;//RE-LATCH THE DATA
  41   1      }
  42          
  43          
  44          void LCD_STR(unsigned char *s)
  45          {
  46   1        while(*s)
  47   1        {
  48   2          LCD_DATA(*s++);
  49   2        }
  50   1      }
  51          
  52          
  53          void LCD_INT(int n)
  54          {
  55   1        signed char arr[5],i=0;
C51 COMPILER V9.50a   LCD_HEADER                                                           01/12/2023 09:58:40 PAGE 2   

  56   1        if(n==0)
  57   1          LCD_DATA('0');
  58   1        else
  59   1        {
  60   2          if(n<0)//condition for -ve number
  61   2          {
  62   3            LCD_DATA('-');//print -ve sign
  63   3            n=-n;//change -ve to +ve no.
  64   3          }
  65   2          while(n>0)
  66   2          {
  67   3            arr[i++] = (n%10)+48;//converting to eqiv. ascii
  68   3            n/=10;
  69   3          }
  70   2          for(--i;i>=0;i--)//init -> --i for dec the i which is previously incremented
  71   2            LCD_DATA(arr[i]);
  72   2        }
  73   1      }
  74          
  75          void LCD_FLOAT(float f_val)
  76          {
  77   1        unsigned int n_val;
  78   1        n_val = f_val;//assigning the number before decimal
  79   1        LCD_INT(n_val);//before decimal value print
  80   1        LCD_DATA('.');//to display decimal dot
  81   1        n_val=(f_val-n_val)*100;//2-decimal digit
  82   1        LCD_INT(n_val);
  83   1      }
  84          void cgram_write(void)
  85          {
  86   1      unsigned char k;
  87   1      LCD_CMD(0x40);
  88   1      for(k=0;k<8;k++)
  89   1      LCD_DATA(cgram_lut[k]);
  90   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    332    ----
   CONSTANT SIZE    =     16    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----      14
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
